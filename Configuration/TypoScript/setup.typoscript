# =======================================
# Project Configuration: TypoScript Setup
# =======================================

# Base configurations
@import 'EXT:base_configuration/Configuration/TypoScript/Setup/LibContentElement.typoscript'
@import 'EXT:base_configuration/Configuration/TypoScript/Setup/Menus.typoscript'
@import 'EXT:base_configuration/Configuration/TypoScript/Setup/Page.typoscript'
@import 'EXT:project_configuration/Configuration/TypoScript/Setup/OpenGraph.typoscript'
@import 'EXT:project_configuration/Configuration/TypoScript/Setup/Twitter.typoscript'
@import 'EXT:base_configuration/Configuration/TypoScript/Setup/FluidTemplate.typoscript'
@import 'EXT:base_configuration/Configuration/TypoScript/Setup/Config.typoscript'
@import 'EXT:base_configuration/Configuration/TypoScript/Setup/Rte.typoscript'
@import 'EXT:base_configuration/Configuration/TypoScript/Setup/PageContents.typoscript'

# Content Elements
@import 'EXT:base_carousel/Configuration/TypoScript/setup.typoscript'
@import 'EXT:base_columns/Configuration/TypoScript/setup.typoscript'
@import 'EXT:base_extendedsection/Configuration/TypoScript/setup.typoscript'
@import 'EXT:base_gallery/Configuration/TypoScript/setup.typoscript'
@import 'EXT:base_menus/Configuration/TypoScript/setup.typoscript'
@import 'EXT:base_section/Configuration/TypoScript/setup.typoscript'
@import 'EXT:base_teaser/Configuration/TypoScript/setup.typoscript'
@import 'EXT:base_textroundmedia/Configuration/TypoScript/setup.typoscript'
@import 'EXT:base_accordiontabs/Configuration/TypoScript/setup.typoscript'

# Project configurations
@import 'EXT:project_configuration/Configuration/TypoScript/Setup/Form.typoscript'
@import 'EXT:project_configuration/Configuration/TypoScript/Setup/Page.typoscript'

# extensions
# =======
# set path with extension name and setup file here:
# @import 'EXT:project_configuration/Configuration/TypoScript/Setup/Extensions/EXTENSION_NAME/setup.typoscript'


# COMKOMÂ° Typo3 Project Configuration: General Page Contents
# ==========================================================

# Site URL prefix
# ===============
config {
    absRefPrefix = auto
}

# add variables to fluidtemplate
page {
    10 = FLUIDTEMPLATE
    10 {
        variables {
            RootId = TEXT
            RootId.value = {$RootId}
            # Opening times for Navigation.html
            opening-times = RECORDS
            opening-times {
                tables = tt_content
                source = {$CeOpeningTimesId}
                dontCheckPid = 1 
            }
        }
        dataProcessing {
            100 = TYPO3\CMS\Frontend\DataProcessing\FilesProcessor
            100 {
                references {
                    table = pages
                    fieldName = media
                }
                where.data = field:uid
                as = pageimage
            }
        }
    }
}
