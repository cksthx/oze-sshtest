<f:variable name="small">{settings.imageSizeSmall}</f:variable>
<f:variable name="medium">{settings.imageSizeMedium}</f:variable>
<f:variable name="large">{settings.imageSizeLarge}</f:variable>

<f:switch expression="{backendlayout}">
	<f:case value="backendlayout-heroimage">
		<f:for each="{image.file}" as="file" iteration="imageiterator">
			<f:if condition="{imageiterator.isFirst}">
				<f:render section="HeroImage" arguments="{_all}"/>
			</f:if>
		</f:for>
	</f:case>
	<f:defaultCase>
		<f:if condition="{childrenExtendedSectionContent}">
			<f:then>
				<f:for each="{image.file}" as="file" iteration="imageiterator">
					<f:if condition="{imageiterator.isFirst}">
						<f:render section="KeyImage" arguments="{_all}"/>
					</f:if>
				</f:for>
			</f:then>
			<f:else>
				<f:for each="{image.file}" as="file">
					<f:render section="KeyImage" arguments="{_all}"/>
				</f:for>
			</f:else>
		</f:if>
	</f:defaultCase>
</f:switch>

<f:section name="HeroImage">
	<f:if condition="{file.properties.type} != '4'">
		<f:then>
			<picture class="picture-match heroimage">
				<source srcset="{f:uri.image(image: file, width: '{medium * 1.5}', cropVariant: 'herodefault')}" media="(min-width: {settings.mediaQueryMediumMin}px) AND (max-width: {settings.mediaQueryMediumMax}px)">
				<source srcset="{f:uri.image(image: file, width: '{large * 1.5}', cropVariant: 'herodesktop')}" media="(min-width: {settings.mediaQueryLargeMin}px)">
				<f:media class="img-fluid jumbotron-img" file="{file}" width="{small * 1.5}" alt="{file.alternative}" title="{file.title}" cropVariant="herodefault" loading="{settings.media.lazyLoading}"/>
			</picture>
		</f:then>
		<f:else>
			<figure class="video">
				<div class="video-embed">
					<f:media class="video-embed-item" file="{file}" width="{dimensions.width}" height="{dimensions.height}" alt="{file.alternative}" title="{file.title}" additionalConfig="{settings.media.additionalConfig}" />
				</div>
				<f:if condition="{file.description}">
					<figcaption class="video-caption">
						{file.description -> f:format.nl2br()}
					</figcaption>
				</f:if>
			</figure>
		</f:else>
	</f:if>
</f:section>

<f:section name="KeyImage">
	<f:if condition="{file.properties.type} != '4'">
		<f:then>
			<picture class="picture-match keyimage">
				<source srcset="{f:uri.image(image: file, width: '{medium * 1.5}', cropVariant: 'default')}" media="(min-width: {settings.mediaQueryMediumMin}px) AND (max-width: {settings.mediaQueryMediumMax}px)">
				<source srcset="{f:uri.image(image: file, width: '{large * 1.5}', cropVariant: 'desktop')}" media="(min-width: {settings.mediaQueryLargeMin}px)">
				<f:media class="img-fluid jumbotron-img" file="{file}" width="{small * 1.5}" alt="{file.alternative}" title="{file.title}" cropVariant="default" loading="{settings.media.lazyLoading}"/>
			</picture>
		</f:then>
		<f:else>
			<figure class="video">
				<div class="video-embed">
					<f:media class="video-embed-item" file="{file}" width="{dimensions.width}" height="{dimensions.height}" alt="{file.alternative}" title="{file.title}" additionalConfig="{settings.media.additionalConfig}" />
				</div>
				<f:if condition="{file.description}">
					<figcaption class="video-caption">
						{file.description -> f:format.nl2br()}
					</figcaption>
				</f:if>
			</figure>
		</f:else>
	</f:if>
</f:section>